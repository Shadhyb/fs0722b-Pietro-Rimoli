<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>JS3 giorno 1</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="container row mt-3">
      <div class="col-6">
        <div>
          <form class="d-flex flex-column">
            <input
              type="text"
              class="form-text form-control pb-2 mb-2"
              name="nome"
              id="nome"
              placeholder="Inserisci il tuo nome"
            />
            <input
              type="text"
              class="form-text form-control pb-2 mb-2"
              name="cognome"
              id="cognome"
              placeholder="Inserisci il tuo cognome"
            />
            <div class="row-cols-3 mt-2 g-2">
              <input
                type="date"
                class="form-text col pb-2 mb-2"
                name="data"
                id="data"
              />
              <button type="button" id="add" class="btn btn-info col">Aggiungi</button>
            </div>
          </form>
        </div>
      </div>
      <div class="col-6">
        <table class="table">
          <thead class="table-dark">
            <tr>
              <th>Nome</th>
      
              <th>Anni</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
    <script>
         const btn = document.querySelector('#add');
         btn.addEventListener('click', function(event){ //associo una funzione all evento
            event.preventDefault(); //previene il default
            const name = document.querySelector('#nome').value;
            const surname = document.querySelector('#cognome').value;
            const birth = document.querySelector('#data').value;
            //creo istanza dell'oggetto
            let p = new Persona(name,surname,birth); 
            //prendo i dati dal form
            p.aggiungiAllaTabella();
        })

        function Persona(x,y,z){ //associo 3 valori a persona
            this.name = x;
            this.surname = y;
            this.birth = z;
            this.mostraNomeCompleto =function(){return this.name + " " + this.surname;
        };//mostraNomeCompleto Ã¨ la funzione che riunisce nome e cognome
         
        this.aggiungiAllaTabella = function(){
            const eta = this.calcolo();
            let tabella = document.querySelector('.table');
            let tr = document.createElement('tr');
            tr.innerHTML = `<td>${this.name} ${this.surname}</td><td>${eta}</td>`;
            tabella.appendChild(tr);
        }
         this.calcolo = function(){
            const todayDate = new Date();
            const currentYear = todayDate.getFullYear();
            const birthDate = new Date(this.birth);
            const birthYear = birthDate.getFullYear();
            const age = currentYear - birthYear;
            return age;
         }
        }
    
    </script>
  </body>
</html>
